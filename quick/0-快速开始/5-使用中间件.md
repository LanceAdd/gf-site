---
slug: '/middleware'
title: '使用中间件'
hide_title: true
sidebar_position: 1
---

本章节，我们将会简单介绍中间件的设计，以及使用。

## 中间件介绍

中间件是一种拦截器设计，在`Web Server`中可以拦截请求和返回结果，并在其前后进行自定义逻辑处理。

中间件的定义和普通的路由回调函数一样，但是可以在 `Request` 参数中使用 `Middleware` 属性对象来控制请求流程。

在该中间件中执行完成跨域请求处理的逻辑后，使用 `r.Middleware.Next()` 方法进一步执行下一个流程；
如果这个时候直接退出不调用 `r.Middleware.Next()` 方法的话，将会退出后续的执行流程（例如可以用于请求的鉴权处理）。

## 中间件类型

中间件的类型分为两种：前置中间件和后置中间件。前置即在路由服务函数调用之前调用，后置即在其后调用。

### 前置中间件

其定义类似于：

```
func Middleware(r *ghttp.Request) {
	// 中间件处理逻辑
	r.Middleware.Next()
}
```

### 后置中间件

其定义类似于：

```
func Middleware(r *ghttp.Request) {
	r.Middleware.Next()
	// 中间件处理逻辑
}
```

## 使用中间件













