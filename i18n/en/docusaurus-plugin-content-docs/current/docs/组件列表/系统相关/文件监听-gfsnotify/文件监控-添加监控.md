---
slug: '/docs/components/os-gfsnotify-add'
title: 'File Monitoring - Add Watch'
sidebar_position: 0
hide_title: true
keywords: [Add Watch, File Monitoring, GoFrame Framework, gfsnotify, Recursive Monitoring, File Modification, Directory Monitoring, File Event, File Change, Monitoring Options]
description: "Define and implement file monitoring functionality, using the gfsnotify library in the GoFrame framework to monitor file creation, writing, deletion, renaming, and permission modification events in a specified directory. Supports recursive monitoring, automatically detecting changes in files within directories and subdirectories, with flexible monitoring options and real-time output of file event information related to the directory."
---

## Add Watch

```go
package main

import (
    "context"

    "github.com/gogf/gf/v2/frame/g"
    "github.com/gogf/gf/v2/os/gfsnotify"
)

func main() {
    var (
        path     = "/home/john/temp"
        ctx      = context.Background()
        logger   = g.Log()
        callback = func(event *gfsnotify.Event) {
            if event.IsCreate() {
                logger.Debug(ctx, "Create file: ", event.Path)
            }
            if event.IsWrite() {
                logger.Debug(ctx, "Write file: ", event.Path)
            }
            if event.IsRemove() {
                logger.Debug(ctx, "Delete file: ", event.Path)
            }
            if event.IsRename() {
                logger.Debug(ctx, "Rename file: ", event.Path)
            }
            if event.IsChmod() {
                logger.Debug(ctx, "Change permissions: ", event.Path)
            }
            logger.Debug(ctx, event)
        }
    )
    _, err := gfsnotify.Add(path, callback, gfsnotify.WatchOption{})
    if err != nil {
        logger.Fatal(ctx, err)
    } else {
        select {}
    }
}
```

The `/home/john` parameter is a directory. When we create/delete/modify files in the `/home/john` directory, `gfsnotify` detects the file modifications and outputs the corresponding event information.

## Recursive Monitoring

We can use `gfsnotify.WatchOption` to set some options for monitoring, such as whether to enable recursive monitoring. By default, the `Add` method performs recursive monitoring, meaning that changes to files within the directory (including those in subdirectories) will also trigger the file monitoring callback.

If we create new directories under the monitored directory and continue to create new directories or files within them, and so on, the newly created directories or files will also be automatically monitored.