---
slug: '/quick/api-doc'
title: 'API Documentation'
hide_title: true
sidebar_position: 8
keywords: [GoFrame, GoFrame Framework, API Documentation Generation, OpenAPIv3, Swagger UI, Automated API Documentation, API Data Structure, GoFrame Tutorial, Web Development, API Documentation]
description: "Using the GoFrame framework, standard-compliant API documentation can be easily generated. This article introduces how to enhance API definitions and combine them with the OpenAPIv3 protocol and Swagger UI to automatically generate and display API documentation. The code examples provide a detailed explanation of API data structure definitions, routing middleware settings, and how to optimize the API documentation generation process using GoFrame framework features."
---

Using the `GoFrame` framework to automate the generation of API documentation is very simple.

We first make a simple enhancement to the API data structure from previous sections to make the generated API documentation more elegant.

## API Definition Enhancement

```go
type HelloReq struct {
    g.Meta `path:"/" method:"get" tags:"Test" summary:"Hello world test case"`
    Name   string `v:"required" json:"name" dc:"Name"`
    Age    int    `v:"required" json:"age"  dc:"Age"`
}
type HelloRes struct {
    Content string `json:"content" dc:"Return Result"`
}
```

As you can see, based on the API data structure definition in previous sections, we have added two tags to the `g.Meta`:
- `tags`: Which category or module the API belongs to.
- `summary`: API description.

:::info
These tags are standard fields of the `OpenAPIv3` protocol. The development manual provides a detailed explanation of API documentation generation and tags in the corresponding section, which will not be introduced here.
:::

## Full Code Example

```go title="main.go"
package main

import (
    "context"
    "fmt"

    "github.com/gogf/gf/v2/frame/g"
    "github.com/gogf/gf/v2/net/ghttp"
)

type Response struct {
    Message string      `json:"message" dc:"Message"`
    Data    interface{} `json:"data"    dc:"Execution Result"`
}

type HelloReq struct {
    g.Meta `path:"/" method:"get" tags:"Test" summary:"Hello world test case"`
    Name   string `v:"required" json:"name" dc:"Name"`
    Age    int    `v:"required" json:"age"  dc:"Age"`
}
type HelloRes struct {
    Content string `json:"content" dc:"Return Result"`
}

type Hello struct{}

func (Hello) Say(ctx context.Context, req *HelloReq) (res *HelloRes, err error) {
    res = &HelloRes{
        Content: fmt.Sprintf(
            "Hello %s! Your Age is %d",
            req.Name,
            req.Age,
        ),
    }
    return
}

func Middleware(r *ghttp.Request) {
    r.Middleware.Next()

    var (
        msg string
        res = r.GetHandlerResponse()
        err = r.GetError()
    )
    if err != nil {
        msg = err.Error()
    } else {
        msg = "OK"
    }
    r.Response.WriteJson(Response{
        Message: msg,
        Data:    res,
    })
}

func main() {
    s := g.Server()
    s.Group("/", func(group *ghttp.RouterGroup) {
        group.Middleware(Middleware)
        group.Bind(
            new(Hello),
        )
    })
    s.SetOpenApiPath("/api.json")
    s.SetSwaggerPath("/swagger")
    s.SetPort(8000)
    s.Run()
}
```
In this example:
- The `OpenAPIv3` API documentation generation is enabled by `s.SetOpenApiPath("/api.json")`, and the generated file path is specified as `/api.json`.
- The built-in `Swagger` API documentation UI is enabled by `s.SetSwaggerPath("/swagger")`, and the UI access address is specified as `/swagger`. The built-in `Swagger UI` can be customized and modified; details can be found in the development manual's corresponding section.

### About `OpenAPIv3`

`OpenAPIv3` is the current industry standard protocol for API documentation, used for API documentation definition, typically generating in `json` format. The `json` file of this API documentation can be opened with many API documentation UI tools, such as `Swagger UI/PostMan/ApiFox`, etc.

### About `Swagger`

`Swagger` is a commonly used API documentation UI tool that supports multiple API documentation formats, the most common being the `OpenAPIv3` format.

In this example, to view the API documentation using the built-in `Swagger UI`, both `OpenAPIv3` and `Swagger UI` need to be enabled. That is, by calling the `SetOpenApiPath` and `SetSwaggerPath` methods to set the corresponding access paths.

## Execution Results


### Terminal Output

After execution, the terminal outputs:
```text
2024-10-28 21:56:42.747 [INFO] pid[87280]: http server started listening on [:8000]
2024-10-28 21:56:42.747 [INFO] {d84db2976ea202187ba40f5d0657e4d7} swagger ui is serving at address: http://127.0.0.1:8000/swagger/
2024-10-28 21:56:42.747 [INFO] {d84db2976ea202187ba40f5d0657e4d7} openapi specification is serving at address: http://127.0.0.1:8000/api.json

  ADDRESS | METHOD |   ROUTE    |                        HANDLER                        |    MIDDLEWARE      
----------|--------|------------|-------------------------------------------------------|--------------------
  :8000   | GET    | /          | main.(*Hello).Say                                     | main.Middleware    
----------|--------|------------|-------------------------------------------------------|--------------------
  :8000   | ALL    | /api.json  | github.com/gogf/gf/v2/net/ghttp.(*Server).openapiSpec |                    
----------|--------|------------|-------------------------------------------------------|--------------------
  :8000   | ALL    | /swagger/* | github.com/gogf/gf/v2/net/ghttp.(*Server).swaggerUI   | HOOK_BEFORE_SERVE  
----------|--------|------------|-------------------------------------------------------|--------------------
```

We can see that the terminal output has changed slightly:
- The terminal outputs the `swagger` address `http://127.0.0.1:8000/swagger/`. Clicking this address opens the `Swagger UI` API.
- The terminal outputs the `openapi` API documentation address `http://127.0.0.1:8000/api.json`. This address file can be viewed using many API documentation UI tools.
- The routing information includes two additional addresses, corresponding to the `swagger` and `openapi` addresses. The `swagger` route address uses the `HOOK` feature of the `Server`, which is a more flexible request interception method than middleware, capable of intercepting both dynamic APIs and static resource requests. There are several fixed `HOOK` injection points, and the one used here is `HOOK_BEFORE_SERVE`. For more details, please refer to the corresponding sections of the `Web Server` chapter in the development manual. We will not go into further details here.

### `Swagger UI`

Click the `swagger` address http://127.0.0.1:8000/swagger/ to view:

![alt text](QQ_1730124029804.png)

- Since we only defined one API, the `Swagger` page displays only one API definition, showing the specific API name `Hello world test case` under the `Test` category.

- In the API details, it displays the input and output data structures of the API. GoFrame-generated API documentation can automatically identify validation rules for input data structures, such as whether a parameter is required. It also shows the data type and description of each parameter.


## Learning Summary

Through this section, we have learned the following points:
- By defining standardized input and output data structures for routing APIs, it is easier to maintain APIs, especially in complex business projects with many APIs.
- The automated API documentation generation feature of the `GoFrame` framework allows for easily generating standardized `OpenAPIv3` API documentation and `Swagger UI`, greatly reducing API maintenance costs and improving inter-service collaboration efficiency.